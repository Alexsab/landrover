/** * @author Alexsab.ru */
document.addEventListener("DOMContentLoaded",(function(){})),function(t){function e(t,a,n,o,i,s,r,c){e.version=t,e.token=a,e.on_page=n,e.model=o,e.page=i,e.several_models=s,e.callkeeper_hash=r,e.static_utm=c}function a(t,e,a,n){a=a||function(){},jQuery("html, body").animate({scrollTop:t+(n||0)},e,(function(){a()}))}e.isMobile=t(window).width()<767,e.isTablet=t(window).width()<991&&!e.isMobile,e.isDesktop=!e.isTablet&&!e.isMobile,e.scrollToElement=function(t,e,n,o){a(t.offset().top,e,n,o)},e.scrollToPos=a,e.load=function(a,n,o){n=n||function(){},o.request_token=e.token,t.ajax({url:a,dataType:"json",type:"POST",data:o}).then((function(t){return n(t)})).fail((function(t){console.warn("data",t)}))},window.app=e}(jQuery),function(t,e){t((function(){e.initForm(),e.initMain(),e.initMap(),e.initMask(),e.initMmenuDisclamer()}))}(jQuery,window.app),function(t,e){e.initMmenuDisclamer=function(){t(".js-mmenu").click((function(){var a=t(window).width();t(this).toggleClass("active"),t(".header__mobile").slideToggle(),a<=767&&(t(this).hasClass("active")?e.disableScroll():e.enableScroll())})),t(".js-open-rules").click((function(){t(this).toggleClass("active"),t(".js-rules-text").slideToggle()}))}}(jQuery,window.app),function(t,e){function a(t,e){var a,o=!0;if(null==t.val()&&t.val("false"),n(t)&&n(t.attr("name"))&&""!==t.attr("name")){var i=(t.val()+"").trim();(!t.hasClass("valid_email")||(a=i,new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(a)))&&("checkbox"!==t.attr("type")||t.is(":checked"))&&n(i)&&""!==i&&i!==t.data("mask")||(o=!1)}return o?t.removeClass(e):t.addClass(e),o}function n(t){return null!=t}function o(){e.isDesktop||function(){var e={phone:"tel",mail:"email",email:"email",date:"date",time:"time"};for(var a in e)0<t('input[name="'+a+'"], input.'+a).length&&t('input[name="'+a+'"], input.'+a).each((function(){t(this).attr("type",e[a])}))}(),t("select").styler(),t("body").on("focus",'input[name="phone"]',(function(e){t(this).mask("+7 (999) 999-99-99").data("mask","+7 (___) ___-__-__")}))}function i(t,e){window["yaCounter"+window.ym_counter_id].reachGoal(t,e)}t("body").on("click",".js-goal",(function(){var e=t(this),a=e.data("src"),n=e.data("goal-modal"),o=e.data("goal");a&&t(a).find('input[name="goal"]').val(n),i(o,{})})),e.initForm=function(){o(),t("body").on("submit","form",(function(n){var o,s,r=t(this);!function(e,n){var o,i=!0,s=t(".required",e).length,r=['input[type="text"]','input[type="login"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="tel"]','input[type="email"]','input[type="textarea"]','input[type="select"]',"textarea",'select[name="salon"]',"select"];if(n=n||"has-error",t(".required, input, textarea, select").removeClass(n),s<1)return i;for(var c=0;c<s;c++)o=t(".required",e).eq(c),t(r.join(","),o).each((function(){if(!a(t(this),n))return i=!1}));return i}(r)?(n.preventDefault(),n.stopPropagation(),t(".has-error",r).first().focus()):r.hasClass("js-ajax-form")&&(n.preventDefault(),r.addClass("load"),t('input[name="request_token"]').val(e.token),s=function(t){var e,a;e=r,"success"===(a=t).status&&(e.after(a.content),e.remove(),function(t,e){(function(t){ga("importer.send","event",t),ga("send","event",t)})(t),i(t,e)}(a.goal,a.data.auto||{})),r.removeClass("load")},function(e,a,n){n=n||function(){},t.ajax({url:e,dataType:"json",type:"POST",data:a,success:function(t){n(t)},error:function(t){n({type:"error",class:"danger",text:t.responseText})}})}((o=r).attr("action")||"/",o.serialize(),s))})),t("body").on("change",".has-error",(function(){var e=t(this);a(e)&&e.closest(".has-error").removeClass("has-error")})),t("body").on("keydown",'input[name="phone"]',(function(e){var a=t(this);a.val()!==a.data("mask")&&""!==a.val()||"8"!==e.key||e.preventDefault()})),navigator.appVersion.match(/MSIE 9/)&&(t("body").on("focus","[placeholder]",(function(){var e=t(this);e.val()===e.attr("placeholder")&&e.val("")})),t("body").on("blur","[placeholder]",(function(){var e=t(this);""===e.val()&&e.val(e.attr("placeholder"))})))},e.pageFormInit=o}(jQuery,window.app),function(t,e){function a(){t("html, body").removeAttr("style")}t(window).resize((function(){var e=t(window).width();if(1300<=e){var a=e/118.75;t("html, body").css({"font-size":+a+"px"})}})),e.disableScroll=function(){t("html, body").css({position:"fixed",height:"100vh",width:"100%",overflow:"hidden"})},e.enableScroll=a,e.initMain=function(){t("[data-fancybox]").fancybox({autoFocus:!0,touch:!1}),t(".js-type").change((function(){var e=t(this).is(":checked"),a=t(this).closest(".auto-list__block"),n=a.find(".js-vigoda").attr("data-text1"),o=a.find(".js-vigoda").attr("data-text2"),i=a.find(".js-vigoda-val").attr("data-val1"),s=a.find(".js-vigoda-val").attr("data-val2"),r=a.find(".js-time").attr("data-text1"),c=a.find(".js-time").attr("data-text2"),l=a.find(".js-time-val").attr("data-val1"),d=a.find(".js-time-val").attr("data-val2");1==e?(a.find(".js-vigoda").text(o),a.find(".js-vigoda-val").text(s),a.find(".js-time").text(c),a.find(".js-time-val").text(d)):(a.find(".js-vigoda").text(n),a.find(".js-vigoda-val").text(i),a.find(".js-time").text(r),a.find(".js-time-val").text(l))})),t("[data-scroll-to]").click((function(e){e.preventDefault(),t(".js-mmenu").removeClass("active"),t(".header__mobile").hide(),i<=767&&a();var n=t(this).attr("data-scroll-to"),o=t(n).offset().top-48;t("body,html").animate({scrollTop:o},1500)}))}}(jQuery,window.app),function(t){window.app.initMap=function(){ymaps.ready((function(){var e=new ymaps.Map("map",{center:t(".js-mapcontrol.active").data("coord"),zoom:16});t(".js-mapcontrol").each((function(){var a=t(this).data("coord"),n=t(this).data("adress"),o=new ymaps.Placemark(a,{hintContent:"",balloonContent:n});e.geoObjects.add(o)})),e.behaviors.disable("scrollZoom"),e.controls.remove("geolocationControl"),e.controls.remove("searchControl"),e.controls.remove("trafficControl"),e.controls.remove("typeSelector"),e.controls.remove("fullscreenControl"),e.controls.remove("rulerControl"),t(".js-mapcontrol").on("click",(function(){var a=t(this);t(".js-mapcontrol").removeClass("active"),a.addClass("active"),e.panTo(a.data("coord"),{flying:0,timingFunction:"ease-in-out",duration:1e3})}))}))}}(jQuery),function(t,e){var a,n;window.app.initMask=function(){function e(e,o){var i=t(e).val();n=i.length-i.replace(/(\(\d{3}\) \d{3}\-\d{2}\-\d{0,})|(\(\d{3}\) \d{3}\-\d{1})|(\(\d{3}\) \d{3}\-)|(\(\d{3}\) \d{1,2})|(\(\d{3}\) )|(\(\d{1,2})|\(/gm,"").length,a=n+4-1;var s=o.target.selectionStart;a<s?o.target.setSelectionRange(a,a):s<4&&(18==a&&0==s?o.target.setSelectionRange(a,a):o.target.setSelectionRange(4,4))}t("body").on("focus",'input[name="phone"]',(function(a){t(this).mask("+7 (999) 999-99-99").data("mask","+7 (___) ___-__-__"),e(this,a)})),t("body").on("click",'input[name="phone"]',(function(t){e(this,t)})),t("body").on("keyup",'input[name="phone"]',(function(t){switch(t.key){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":case"Backspace":case"Delete":e(this,t)}})),t("body").on("keydown",'input[name="phone"]',(function(o){switch(o.key){case"ArrowRight":if(o.target.selectionStart>=a)return!1;break;case"ArrowLeft":if(o.target.selectionStart<=4)return!1;break;case"End":case"ArrowDown":return o.target.setSelectionRange(a,a),!1;case"Home":case"ArrowUp":return o.target.setSelectionRange(4,4),!1}switch(o.key){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":if(e(this,o),15==n&&18==o.target.selectionStart){var i=t(this),s=i.val().replace(/\+7 \(|\-|\) /gm,"");"8"===s.charAt(0)&&i.mask("+7 (999) 999-99-99").val(s.substr(1)+o.key).focus()}}}))}}(jQuery);